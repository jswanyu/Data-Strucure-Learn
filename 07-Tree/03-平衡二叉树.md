# 平衡二叉树

平衡二叉树，全称平衡二叉搜索树，又被称为AVL（Adelson-Velsky and Landis，发明人的姓名相关）树，即他依然是一棵二叉搜索树，只不过多了平衡的性质。

为什么要多平衡的性质，因为有序数据在二叉搜索树上可以退化为O(n)的链表。

## 平衡二叉树的性质

平衡二叉树具有以下性质：

1. 可以是空树。
2. 假如不是空树，任何一个结点的左子树与右子树都是平衡二叉树，并且高度之差的绝对值不超过 1。



例如下图不是平衡二叉树，因为结点 60 的左子树不是平衡二叉树。

![img](https://pic1.zhimg.com/80/v2-e090a8e3171c8db07e1cda720039e700_720w.jpg)

下图因为虽然任何一个结点的左子树与右子树都是平衡二叉树，但高度之差已经超过 1 。

<img src="https://pic3.zhimg.com/80/v2-7b3cbb7cf1d996c072516b7146144e52_720w.jpg" alt="img" style="zoom: 33%;" />

## 平衡因子

**定义：**某节点的左子树与右子树的高度（深度）差即为该节点的平衡因子（BF，Balance Factor），平衡二叉树中不存在平衡因子大于 1 的节点。在一棵平衡二叉树中，节点的平衡因子只能取 0 、1 或者 -1 ，分别对应着左右子树等高，左子树比较高，右子树比较高。

下图中黑色数字为每个节点的高度，蓝色数字为平衡因子，显然，节点12和8都不满足平衡因子为0，1，-1，所以它不是一棵平衡二叉树

<img src="https://jswanyu-1309100582.cos.ap-shanghai.myqcloud.com/picgo/DataStructure%20and%20Algorithm/AVL%E6%A0%91-%E5%B9%B3%E8%A1%A1%E5%9B%A0%E5%AD%90.png" alt="image-20220523143045947" style="zoom:80%;" />



## 实现代码

这部分代码是基于前一节二分搜索树的代码。

与二分搜索树的不同主要在于

1、Node节点添加了一个 public int height; 属性，用于计算左右子树的高度差。

2、添加了一个计算平衡因子的方法

添加节点时，部分节点的高度会发生改变，会出现树的平衡性被破坏的情况，即getBalanceFactor(node)的绝对值有可能大于1。这时候就应该对树进行调整，保证getBalanceFactor(node)的绝对值小于等于1。



































